# clojure与datomic实现 Event Sourcing 的样例
这是一个使用clojure与datomic实现 Event Sourcing 的样例，包括事件的存储、查询、回放等的操作。

## Event Sourcing

Event sourcing (事件溯源)是对数据持久化的一种方式,记录的是导致状态变化的一系列事件,可以通过事件重播获得状态改变的历史。事件回放可以返回对象到任何状态。  

一个对象从创建开始到消亡会经历很多事件，作为对比：

  * 常规的处理是在每次对象的状态变化后,都将对象的最新状态持久化保存到数据库中，数据库中的数据仅仅反映对象的最新状态。  

  * 事件溯源的处理方式则是保存这个对象所经历的每个事件,而不是保存对象的最新状态，对象所经历事件会按照时间先后顺序存放在数据库中。  


## datomic
### datomic的设计理念
datomic数据库存储事实的集合。数据库中的事实是不可变的:一旦存储，它们就不会被改变。随着时间的推移，旧的事实会被新的事实所取代。数据库的状态是一组事实在给定时间点的值。（译自：[https://docs.datomic.com/on-prem/architecture.html](https://docs.datomic.com/on-prem/architecture.html)）

datomic数据库中记录了对象发展过程中的事实，旧的事实可以被遗忘，但不会被改变，更不会被删除。常规的查询方式可见的是最新的事实，但旧的事实仍然存在，仍然可以被查询。


